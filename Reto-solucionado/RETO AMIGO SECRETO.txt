RETO AMIGO SECRETO 


// Crear Arrray para los nombres que anexa el usurio 
let listaAmigos = [];
// Crear Array para que se alamacenen los nombres que ya han sido sorteados
let amigosYaSoretados = [];
// Nuevo array que será una copia de 'listaAmigos' para el sorteo
let amigosRestantes = [];

// Llammamos al boton soretar para manipularlo
let botonSortear = document.getElementById('botonSortear');

// Función para optimizar el codigo y que no se tenga que reescribir el query selector.  
function asignarTextoElemento(elemento , texto){

    let elementoHTML = document.querySelector(elemento)
    elementoHTML.innerHTML = texto;
    return;

    }
    asignarTextoElemento('h1', 'Sorteo Amigo Secreto');
    //asignarTextoElemento( ` Tu amigo secreto correspondientes es: ${listaAmigos[posiciónEnLaLista]}`);
   

//  Función que captura el Input 
function capturarNombreInsertado(){
    let nombrePorCapturar = document.getElementById('nombreAmigo').value;

    // Definimos la expresión regular para solo permitir letras y espacios
    const limitanteTextual = /^[A-Za-z\s]+$/;

    if (limitanteTextual.test(nombrePorCapturar)) {
        // Si la validación es exitosa, añadirlo a la lista
        listaAmigos.push(nombrePorCapturar);

        //Validación sobre el valor ingresado
        console.log(`El nombre ingresado es válido: ${nombrePorCapturar}`);
        console.log(typeof(nombrePorCapturar));
        //Validación anexo al listado
        console.log(listaAmigos);

    } else {
        // Si la validación falla, muestra una alerta o mensaje de error
        alert("Por favor, ingrese un nombre válido que contenga solo letras.");
    }
    //Llamamos a la función limpiar caja para que se ejecute al final del condicional
    limpiarCaja();
    //Llamamos a la función para que se actualice y muestre la lista en el DOM
    agregarNombresAlDOM();
    return nombrePorCapturar;
}

// Función para limpiar la caja cuando se agregue un nombre 
function limpiarCaja() {
    document.querySelector('#nombreAmigo').value = ''; 
}

//Función para actualizar la lista de amigos en el HTML
function agregarNombresAlDOM() {
    //Seleecionamos la llista en html y la limpiamos.
    let lista = document.getElementById('listaAmigos');
    lista.innerHTML = '';
    //Iterar sobre el array 'amigos' usando un bucle for para que se muestre en el DOM
    for (let i = 0; i < listaAmigos.length; i++) {
        let nombreActual = listaAmigos[i];
        let nuevoElemento = document.createElement('li');
        nuevoElemento.textContent = nombreActual;
        lista.appendChild(nuevoElemento);
    }
    return;
}

// Función para soretar los nombres 
function sortearAmigo() {

//Generamos indice aletorio para los nombres a sortear
    let posiciónEnLaLista = Math.floor(Math.random()*listaAmigos.length);
    let nombreAsignado = listaAmigos[posiciónEnLaLista];

    // Validamos que la lista no este vacia 
    if (amigosRestantes.length === 0 && listaAmigos.length === 0) {
        alert("Por favor, ingrese nombres para poder sortear.");
        return; 
    } else {
        //Validación de que el nombre no ha sido sorteado antes 
        if (amigosYaSoretados.includes(nombreAsignado)) {
            return sortearAmigo();
        } else {
            amigosRestantes = [...listaAmigos]; // Nos agrega al array las actualizaciones de la lista original
            amigosYaSoretados.push(nombreAsignado);
            listaAmigos.splice(posiciónEnLaLista, 1);
            asignarTextoElemento('#resultado', `Tu amigo secreto correspondiente es: ${nombreAsignado}`);
            agregarNombresAlDOM();
            }
        } 
        //Validaciòn sobre las listas origen y luego de sortear
        console.log (`la lista sin los nombres ya sorteado es: ${listaAmigos}`);
        console.log (`la lista generada por el boton sortear es: ${amigosYaSoretados}`);
        console.log (`la lista original que se mostraba en pantalla era: ${amigosRestantes}`);
        
    //Para cuando ya se sortearon todos los nombres
    if (listaAmigos.length === 0) {
        asignarTextoElemento('#resultado', `Tu amigo secreto correspondiente es: ${amigosRestantes}.
            Todos los amigos han sido sorteados.`);
        botonSortear.disabled = true; // Desactivamos el boton cuando ya todos los nombres han sido sorteados
    }
}






